print("===================================="); 
// print("cd to out"); 
// cd("/home/ubuntu/dump/out");
print("going to write to current directory: " + cd()); 

print("===================================="); 
print("Setting ModelicaPath"); 
setModelicaPath("/usr/lib/omlibrary:/home/ubuntu/.openmodelica/libraries:/home/ubuntu/om/mbs/omni/thin/lib/");

print("===================================="); 
print("Loading Modelica"); 
loadModel(Modelica);

print("===================================="); 
print("Loading MbsLite"); 
loadModel(MbsLite);

getErrorString();

print("===================================="); 
print("Loading SPECIFY_MODEL_NAME"); 
loadModel(SPECIFY_MODEL_NAME);

getErrorString();

print("===================================="); 
print("Instantiating SPECIFY_MODEL_NAME"); 
instantiateModel(SPECIFY_MODEL_NAME);

getErrorString();

print("===================================="); 
print("Checking SPECIFY_MODEL_NAME"); 
checkModel(SPECIFY_MODEL_NAME);

getErrorString();

print("===================================="); 
print("");
print("");
print("");
print("Started simulating"); 
print("");
print("SPECIFY_MODEL_NAME"); 
print("");
print("at");
print("");
system("date");
print("");
print("Please find results in");
print("");
print(cd());
print("");
print("");
print("");
if not SPECIFY_DRY_RUN then
  res := simulate
    ( SPECIFY_MODEL_NAME
    , outputFormat = "csv"
    , stopTime = 1000
    , numberOfIntervals = 1000000
    , tolerance = 1e-12
    // -lv=LOG_LS
    // -lv=LOG_DASSL_STATES

    // , method = "ida"
    // -idaLS=klu
    // -idaScaling

    , simflags = "-cpu -emit_protected -lssMaxDensity=0.003 -lssMinSize=1000"

    // -r=res_SPECIFY_MODEL_NAME.csv 
    // -abortSlowSimulation
    // -cpu
    // -emit_protected
    // --noRootFinding
    // -output=...
    // -abortSlowSimulation
    // <-ignoreHideResult>
    //   Emits also variables with HideResult=true annotation.
    );
else
  print("na samom dele net"); 
end if;

getErrorString();

